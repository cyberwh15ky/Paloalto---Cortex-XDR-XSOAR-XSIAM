# åå‘é€£ç·šçš„ã€Œæ¨™æº–æ‹“æ’²ã€
[ ä½ åœ¨å®¶ / å¤–éƒ¨ Client ]  
          |  
       Internet  
          |  
   Azure Public IP  (ä¾‹å¦‚ 52.x.x.x)  
          |  
   Azure VM (Linux, Nginx / Reverse Proxy)  
          |  
     IPSec / TLS Tunnel   â† Palo Alto ä¸»å‹•å»ºç«‹  
          |  
     Palo Alto (10.1.129.4)  
          |  
   GlobalProtect Portal / Gateway  

 
# çœŸå¯¦æµé‡è·¯å¾‘  
[ å¤–éƒ¨ Client ]  
        |  
        |  (TCP 443)  
        v  
[ Azure å…¬ç¶² IP ]  
        |  
        |  (åå‘ä»£ç† / ä¸­ç¹¼)  
        v  
[ IPSec / Tunnel ]  
        |  
        |  (Palo Alto ä¸»å‹•å»ºç«‹çš„é€£ç·š)  
        v  
[ Palo Alto NGPW ]  
        |  
        v  
[ GlobalProtect Portal / Gateway ]  



### é—œéµé»
> å¤–éƒ¨æ°¸é åªçœ‹åˆ° Azure å…¬ç¶² IP  
> Palo Alto æ°¸é æ˜¯ å‘å¤–ä¸»å‹•é€£ç·š  
> ä¸å­˜åœ¨ã€Œå¤–éƒ¨æ‰“ä½ å®¶è£¡ã€é€™ä»¶äº‹



### å¯é©—è­‰æ¸…å–®  
  
åªè¦ä¸‹é¢ 5 æ¢å…¨éƒ¨æˆç«‹ï¼Œå°±ç™¾åˆ†ä¹‹ç™¾æˆåŠŸï¼š  
  
1ï¸âƒ£ Palo Alto èƒ½ ping Azure VM çš„ tunnel IP  
2ï¸âƒ£ Azure VM èƒ½ ping 10.1.129.4ï¼ˆé€é tunnelï¼‰  
3ï¸âƒ£ Azure VM curl https://10.1.129.4 æœ‰å›æ‡‰  
4ï¸âƒ£ Azure VM 443 å° Internet é–‹æ”¾  
5ï¸âƒ£ å¤–éƒ¨ Client https://Azure_Public_IP èƒ½çœ‹åˆ° GP Portal  
  
ğŸ‘‰ 5/5 = æˆåŠŸ  
ğŸ‘‰ 4/5 = ä¸€å®šèƒ½ä¿®åˆ°æˆåŠŸ  
